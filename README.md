<h1>SMB Vulnerability - EternalBlue</h1>


<h2>Description</h2>
Project consists of a simple walkthrough of the poplular EternalBlue exploit, from information gathering to exploitation. The demonstration will first show how to exploit the machine using the Metasploit framework before moving on to a demonstration on how to manually check for EternalBlue vulnerability. 
<br />


<h2>Languages and Utilities Used</h2>

- <b>Metasploit</b> 
- <b>Python</b>

<h2>Environments Used </h2>

- <b>Windows 7</b> (VMware Workstation)
- <b>Kali Linux</b> (VMware Workstation)

<h2>Program walk-through:</h2>

- <b>Information Gathering</b>
<p align="center">
Netdiscover scan: sudo netdiscover -r 192.168.230.0/24  <br/>
<img src="https://i.imgur.com/ftJe7E4.png" height="80%" width="80%" alt="netdiscover scan"/>
<br />
<br />
Nmap scan: nmap 192.168.230.128 -T4 -p- -A <br/>
<img src="https://i.imgur.com/u2lk3HO.png" height="80%" width="80%" alt="nmap scan"/>
<br />
<br />
Not much information is given from the nmap scan. A good guess is that it is an SMB vulnerability given the SMB discovery. <br/>
After performing a Google search for ‘Windows 7 Ultimate 7601 Service Pack 1 exploit’, information about EternalBlue is discovered. <br/>
<br />
<br />
 
- <b>Metasploit Exploitation</b>
<p align="center">
After launching msfconsole, search for EternalBlue: <br/>
<img src="https://i.imgur.com/e0fNihc.png" height="80%" width="80%" alt="metasploit search"/>
<br />
<br />
Choosing the auxiliary scanner module(3), allows you to set the rhosts and check to see if the remote host is vulnerable. <br/>
However, a check feature is added to the exploit option(0) that will perform the same scan (as shown below.) It is also worth <br/>
noting, if no payload is configured, it defaults to windows/x64/meterpreter/reverse_tcp, which is what we want for this exploit<br/>
<img src="https://i.imgur.com/jp0SA5e.png" height="80%" width="80%" alt="metasploit"/>
<br />
<br />
<img src="https://i.imgur.com/0aB6Bcb.png" height="80%" width="80%" alt="metasploit"/>
<br />
<br />
<img src="https://i.imgur.com/WKz9WSl.png" height="80%" width="80%" alt="metasploit"/>
<br />
<br />
 
- <b>Manual Exploitation </b><br/>
When looking for manual methods for exploiting a system, you will likely use Exploit Database or GitHub. This demonstration follows <br/>
AutoBlue-MS17-010 from <a href="https://github.com/3ndG4me/AutoBlue-MS17-010">3ndG4me</a>. Please note that the ip address of the target has changed from 192.168.230.128 to 192.168.230.130. It is the same machine, just assigned a different address on a different day. <br/>
<p align="center">
<br />
<br />
After cloning the github repository, navigate to the kali linux directory you wish to use. <br/>
<img src="https://i.imgur.com/ILTmJB4.png" height="80%" width="80%" alt="manual check"/>
<br />
<br />
Once the repository is copied to your local machine, cd into the AutoBlue folder and install requirements.txt. <br/>
<img src="https://i.imgur.com/I7VsFAg.png" height="80%" width="80%" alt="manual check"/>
<br />
<br />
Run eternal_checker.py <br/>
<img src="https://i.imgur.com/ao6dVUH.png" height="80%" width="80%" alt="manual check"/>
<br />
<br />
Many times it is best to not run the full exploit. For example, if the environment has critical machines running (like a hospital), you do not want to take down that critical machine. Therefore, this check feature serves as an important tool. It is enough to show that this particular system is vulnerable to the EternalBlue exploit. 
<br />
<br />
Take a look at <a href="https://github.com/3ndG4me/AutoBlue-MS17-010">3ndG4me</a> for full usage directions of this MS17-010 exploit. 
</p>

<!--
 ```diff
- text in red
+ text in green
! text in orange
# text in gray
@@ text in purple (and bold)@@
```
--!>
